<!doctype html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" href="favicon.ico">
    <title>在星空枯萎之后-电脑端</title><!--选择非弹性布局-->
    <script>
        function judge() {
            var userAgentInfo = navigator.userAgent;
            var Agents = ["Android", "iPhone",
                "SymbianOS", "Windows Phone",
                "iPad", "iPod"
            ];    //  判断是否是这几个系统
            var isPC = true;
            for (let i = 0; i < Agents.length; i++) {
                if (userAgentInfo.indexOf(Agents[i]) > 0) {
                    isPC = false;
                    break;
                }
            }
            return isPC;
        }
        var isPC = judge();
        if(!isPC){
            window.location.href = 'bh3_pe.html' //跳转到手机端页面
        }
    </script>
    <script src="js/vue.js"></script>
    <script src="js/config_1.js"></script>
    <style>
        /*动画*/
        @keyframes card_show{from {height:220px;} to {height:370px;}}
        @keyframes card_hide{from {height:370px;} to {height:220px;}}
        @keyframes pao_ma_deng {
            0%{
                background:white;
            }
            25%{
                background: #4781ff;
            }
            50%{
                background: #b26498;
            }
            100%{
                background: red;
            }
        }
        @keyframes game_shade {
            from{top:-100%}
            to{top:5%}
        }
        @keyframes game_shade_2 {
            from{top:5%}
            to{top:-100%}
        }
        /*卡片*/
        #show{width:1728px;position:absolute;left:8%;top:60px}
        .card{width:200px;height:220px;overflow:hidden;margin:5px;transition:0.4s}
        .head_portrait{width:180px;border-radius:180px;margin-left:10px}
        .card_p{width:200px;text-align:center;font-size:16px;margin:4px 0 8px 0}
        /*背景*/
        html{width: 100%;height: 100%;overflow-x: hidden;overflow-y:scroll;}
        html::-webkit-scrollbar{width: 10px;height: 1px;}
        html::-webkit-scrollbar-thumb{border-radius: 10px;-webkit-box-shadow: inset 0 0 5px rgb(221, 223, 255);background: rgb(157, 154, 255);}
        html::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 5px rgb(218, 216, 255);border-radius:10px;background:#c4c6ed;}
        body{width:100%;height:100%;margin:0}
        #background{width:100%;height:100%;margin:0;border:0;padding:0;position:absolute;top:0;z-index:-10}
        #background_img{width:100%;height:100%;background:url("img/bronya.jpg") no-repeat center center;background-size:100% 100%;}
        #background_color{position:absolute;width:100%;height:1220px;top:100%;background:white}
        .bg-blur{float:left;width:100%;background-repeat:no-repeat;background-position:center;background-size:cover;-webkit-filter:blur(4px);-moz-filter:blur(4px);-o-filter:blur(4px);-ms-filter:blur(4px);filter:blur(4px);}
        /*菜单*/
        #menu{width:1600px;height:60px;background:rgba(205,207,255,0.51);position:fixed;top:0;left:8%;border-radius:0 0 20px 20px;z-index:100}
        #menu_ul{width:1600px;height:60px;list-style:none;margin:0}
        .menu_li{width:320px;height:60px;margin:15px 0 0 0;float:left;font-size:20px}
        a{text-decoration:none;}
        a:link{color:#4058ff}
        a:visited{color:#4058ff}
        a:active{color:red}
        #search{display:none;}
        #search input{border:0;border-radius:6px;outline:none;width:160px;height:24px;font-size:14px;}
        #starfish_1{width: 40px;position: fixed;top:12px;left:148px}
        #starfish_2{width: 40px;position: fixed;top:25px;left:1632px}
        #starfish_2_1{width: 40px;position: fixed;top:15px;left:1672px}
        #starfish_3{width: 40px;position: fixed;top:19px;left:790px}
        #starfish_4{width: 40px;position: fixed;top:29px;left:990px}
        #starfish_5{width: 40px;position: fixed;top:-10px;left:1200px}
        #starfish_5_1{width: 40px;position: fixed;top:34px;left:400px}
        #starfish_6{width: 40px;position: fixed;top:27px;left:1400px}
        #summer{width: 80px;position: fixed;top:27px;left:30px}
        #game_shade{background: rgba(255, 255, 255, 0.15);width: 100%;height: 94%;position: fixed;top:-100%;z-index: 1000;transition: 1s}
        #game_over{width: 400px;height:400px;border-radius: 400px;position: fixed;top:-100%;transition: 1s}
        #bgm{width: 140px;height: 50px;position: fixed;top:150px;left: 5px;border-radius: 50px;outline: 0}
        #bgm_1{display: none}
    </style>
</head>
<body>
<a name="top" style="position:absolute;top:0"></a>
<pre style="position:fixed;top:400px;left: 8px;font-size: 16px">
    庆
    典
    结
    束
    ，
    已
    关
    闭
    开
    头
    动
    画
    及
    音
    乐
    </pre>
<div id="menu"><!--顶部菜单（始终悬浮于顶部）-->
    <img src="img/starfish1.png" id="starfish_1" alt="海星"/>
    <img src="img/starfish2.png" id="starfish_2" alt="海星"/>
    <img src="img/starfish2.png" id="starfish_2_1" alt="海星"/>
    <img src="img/starfish3.png" id="starfish_3" alt="海星"/>
    <img src="img/starfish4.png" id="starfish_4" alt="海星"/>
    <img src="img/starfish5.png" id="starfish_5" alt="海星"/>
    <img src="img/starfish5.png" id="starfish_5_1" alt="海星"/>
    <img src="img/starfish6.png" id="starfish_6" alt="海星"/>
    <img src="img/summer.png" id="summer" alt="夏"/>
    <ul id="menu_ul">
        <li class="menu_li">
            <b><a href="pcr.html">公主连结群员昵称表</a></b>
        </li>
        <li class="menu_li">
            <b><a href="#" onclick="night()">dark模式</a>&nbsp;&nbsp;<a href="#" onclick="night()">bright模式</a></b>
        </li>
        <li class="menu_li">
            <b><a href="#top">回到顶部</a>&nbsp;&nbsp;<a href="#bottom">回到底部</a></b>
        </li>
        <li class="menu_li">
            <b><a href="#" onclick="
                if(y%=2){
                    document.getElementById('search').style.display='none';
                    y++;
                    console.log(y)
                }else{
                    document.getElementById('search').style.display='block';
                    y++;
                    console.log(y)
                }">通过QQ查找信息</a></b>
            <div id="search"><!--通过QQ查找信息-->
                <input placeholder="下次查找时请清空输入框" type="text" onchange="find(this)"/>
            </div>
        </li>
        <li class="menu_li">
            <b><a href="#" onclick="pao_ma_deng()">跑马灯</a>&nbsp;<a href="#" onclick="bo_lang()">波浪</a>&nbsp;<a href="#" id="unfold" onclick="unfold()">展开</a></b>
        </li>
    </ul>
</div>
<div id="background" class="bg-blur"><!--背景-->
    <div id="background_img"><!--前半部分图片背景-->
    </div>
    <div id="background_color"><!--后半部分颜色背景-->
    </div>
</div>
<div id="game_shade"><!--游戏用的遮蔽层-->
    <p><b><span style="font-size:18px;line-height:100px;color:red">&nbsp;&nbsp;&nbsp;遮罩层已开启！</span></b></p>
</div>
<div id="show"><!--内容界面，群员信息的方格-->
    <div v-for="row in bh3_sheet_data_s" v-bind:id="row.serial_number - 1" class="card" onmouseout="hide_card(this)" onmousemove="show_card(this)"><!--群员卡格-->
    <img alt="加载失败" class="head_portrait"  v-bind:src="'http://q.qlogo.cn/g?b=qq&amp;nk='+row.qq_id+'&amp;s=640&amp;mType=friendlist'"/><!--头像-->
                <div v-bind:id="row.qq_id"><!--信息层-->
                    <p class="card_p"><b>群:</b>{{row.group_nickname}}</p>
                    <p class="card_p"><b>QQ:</b>{{row.qq_id}}</p>
                    <p class="card_p"><b>游:</b>{{row.game_nickname}}</p>
                    <p class="card_p"><b>游ID:</b>{{row.game_id}}</p>
                    <p class="card_p"><b>惯称:</b>{{row.habit_name}}</p>
                    <p class="card_p"><b>备注:</b></p>
                </div>
    </div>
</div>
<script>
    //创建vue
    var bh3_sheet_data=[];//崩坏三资料表数据
    var bh3_sheet=new Vue({
        el:'#show',
        data:{
            bh3_sheet_data_s:undefined
        }
    });
    //获取崩坏3数据
    function get_bh3_sheet_data(){
        let new_ajax=new XMLHttpRequest();
        new_ajax.open('GET','http://'+server_address+'/php/api/public/int_mysql_get_data_sheet.php?game_name=bh3',true);
        new_ajax.send();
        new_ajax.onreadystatechange=function(){
            if(new_ajax.readyState===4 && new_ajax.status===200){
                bh3_sheet_data=eval(new_ajax.responseText);
                var sheet_obj=new Array();//最外层1
                var row_length=bh3_sheet_data.length;
                for(let i=0;i<row_length;i++){
                    let col_length=bh3_sheet_data[i].length;
                    sheet_obj[i]={};//中层2
                    for(let x=0;x<col_length;x++){
                        switch (x) {
                            case 0:{
                                sheet_obj[i].insert_time=bh3_sheet_data[i][x];break
                            }
                            case 1:{
                                sheet_obj[i].serial_number=bh3_sheet_data[i][x];break
                            }
                            case 2:{
                                sheet_obj[i].qq_id=bh3_sheet_data[i][x];break
                            }
                            case 3:{
                                sheet_obj[i].group_nickname=bh3_sheet_data[i][x];break
                            }
                            case 4:{
                                sheet_obj[i].game_id=bh3_sheet_data[i][x];break
                            }
                            case 5:{
                                sheet_obj[i].game_nickname=bh3_sheet_data[i][x];break
                            }
                            case 6:{
                                sheet_obj[i].habit_name=bh3_sheet_data[i][x];break
                            }
                            case 7:{
                                sheet_obj[i].remarks=bh3_sheet_data[i][x];break
                            }
                            default:{break;}
                        }
                    }
                }
                bh3_sheet.bh3_sheet_data_s=sheet_obj;//刷新数据
                //oder_card();
                setTimeout('oder_card()',10);//排布卡片,会导致vue视图失效，原因-一开始没考虑使用vue，所以采用获取原数据-整合排布-删除原始数据-重新写入已经排布号的数据
                return true;
            }
        };
    }
    get_bh3_sheet_data();
</script>
<!--游戏结束层-->
<img id="game_over" src=""/>
<!--BGM层-->
<audio id="bgm" loop="loop" controls=""><source src="music/nazi.mp3" type="audio/mpeg"></audio>
<audio id="bgm_1"><source src="music/13121.mp3" type="audio/mpeg"></audio>
<script>
    function playPause() {
        var music = document.getElementById('bgm');//音频控件
        music.play();
    }
    var y=0;//search专用
    function randomNum(minNum,maxNum){//随机函数
        switch(arguments.length){
            case 1:
                return parseInt(Math.random()*minNum+1,10);
                break;
            case 2:
                return parseInt(Math.random()*(maxNum-minNum+1)+minNum,10);
                break;
            default:
                return 0;
                break;
        }
    }
    function set_pao_ma_deng(id,q) {
        setTimeout(function (){document.getElementById(id).style.animation='pao_ma_deng 2s forwards 1'},500*q);
    }
    function arr_sort(arr) {//打乱数组
        for (var i = 0; i < arr.length; i++) {
            var iRand = parseInt(arr.length * Math.random());
            var temp = arr[i];
            arr[i] = arr[iRand];
            arr[iRand] = temp;
        }
        return arr;
    }
    function pao_ma_deng() {//跑马灯
        var cards_number=document.getElementsByClassName('card').length;
        var card=new Array();
        for(var i=0;i<cards_number;i++){card[i]=i}//生成数组
        for(var q=0;q<cards_number-1;q++){
            if(q===cards_number-2){
                var win_id=card.shift();
                function game_over(id) {
                    var game_over=document.getElementById('game_over');
                    var win_src='http://q.qlogo.cn/g?b=qq&nk='+(document.getElementById(id).querySelector("div").id)+'&s=640&mType=friendlist';
                    console.log('game_over的src'+win_src);
                    game_over.src=win_src;
                }
                game_over(win_id);
            }
            setTimeout(function (){document.getElementById('game_over').style.top='300px';document.getElementById('game_shade').style.top="-100%";bo_lang() },(cards_number*0.5)*1000);
            setTimeout(function (){document.getElementById('game_over').style.top='-100%'},(cards_number*0.5)*1000+2000);
            var new_arr=arr_sort(card);
            var now_id=new_arr.shift();//取出并删除第一个
            set_pao_ma_deng(now_id,q)
        }
        //开启游戏遮罩
        document.getElementById('game_shade').style.top="6%";
    }
    function set_bo_lang(z) {
        setTimeout(function (){show_card(document.getElementById(z))},180*z);
        setTimeout(function (){hide_card(document.getElementById(z))},180*z+500);
    }
    function bo_lang() {//波浪
        var cards_number=document.getElementsByClassName('card').length;
        for(var z=0 ;z<=cards_number;z++){
            set_bo_lang(z)
        }
    }
    var un=0;//展开专属
    function random_music(c) {//随机放音乐
        setTimeout(function () {
            var x=randomNum(1-10);
            if(x===5){
                playPause();
            }
        },randomNum(1500,4500)*c);
    }
    //    for(var c=0;c<=30;c++){
    //        random_music(c);
    //    }
    function unfold() {//关闭
        if (un%=2) {
            un++;
            document.getElementById('game_shade').style.top="-100%";
            document.getElementById('background_color').style.height=800+'px';
            document.getElementById('unfold').innerText='展开';
            var cards_number = document.getElementsByClassName('card').length;
            for (var z = 0; z <= cards_number; z++) {
                hide_card(document.getElementById(z))
            }
        } else {//展开
            un++;
            document.getElementById('game_shade').style.top="6%";
            document.getElementById('background_color').style.height=2000+'px';
            document.getElementById('unfold').innerText='关闭';
            var cards_number = document.getElementsByClassName('card').length;
            for (var z = 0; z <= cards_number; z++) {
                show_card(document.getElementById(z))
            }
        }
    }
    function hide_card(element) {//隐藏
        element.style.animation="card_hide 0.4s forwards 1";
        var this_id=parseInt(element.id);
        var card_number=document.getElementsByClassName('card').length;
        for(var i=this_id+8;i<card_number;i+=8){
            if(document.getElementById(i)){
                var under_card=document.getElementById(i);
                under_card.style.top=(parseInt(under_card.style.top)-170)+'px';
            }
        }
    }
    function show_card(element) {//显示
        element.style.animation="card_show 0.4s forwards 1";
        var this_id=parseInt(element.id);//被选中的card id
        var card_number=document.getElementsByClassName('card').length;//card数量
        for(var i=this_id+8;i<card_number;i+=8){
            if(document.getElementById(i)){
                var under_card=document.getElementById(i);
                under_card.style.top=(parseInt(under_card.style.top)+170)+'px';
            }
        }
        //console.log('div'+this_id+'有鼠标移入')
    }
    function get_card() {//获取所有的card
        var card_list=new Array();
        var card_number=document.getElementsByClassName('card').length;
        for(var i=0;i<card_number;i++){
            card_list[i]=document.getElementsByClassName('card')[i];
        }
        return card_list;
    }
    function delete_card() {//清除所有
        document.getElementById('show').innerHTML='';
    }
    function oder_card() {
        var list_height=new Array();//高度数据
        var left=0;//位置变量0-7，判断大于7后重置0
        for(x=0;x<8;x++){list_height[x]=0;}//初始化高度数据
        var card=get_card();//获取所有卡片
        var card_leng=card.length;//长度
        delete_card();//删除源数据
        for(var i=0;i<card_leng;i++){
            if(left===8){left=0;}//重置
            var new_div=document.createElement('div');
            new_div.innerHTML=card[i].innerHTML;
            new_div.id=card[i].id;
            new_div.style.position='absolute';
            new_div.style.left=left*200+'px';
            new_div.style.top=list_height[left]+'px';
            new_div.className='card';
            new_div.onmouseenter=function(){show_card(this)};
            new_div.onmouseleave=function(){hide_card(this)};
            var show=document.getElementById('show');
            show.appendChild(new_div);
            list_height[left]+=220;
            left++;
        }
    }
    oder_card();
    var x=0;
    function night(){
        if(x%=2){//白
            document.getElementById('background_img').style.background='url("img/bronya.jpg")  no-repeat center center';
            document.getElementById('background_img').style.backgroundSize='100% 100%';
            document.getElementById('background').className='bg-blur';
            document.getElementById('show').style.color='black';
            document.getElementById('background_color').style.background='white';
            x++;
        }else{
            document.getElementById('background_img').style.background="#3f3f3f";
            document.getElementById('background').className='';
            document.getElementById('show').style.color='white';
            document.getElementById('background_color').style.background='rgb(63, 63, 63)';
            x++;
        }
    }
    function find(values){
        var qq=values.value;
        if(document.getElementById(qq)){
            var text=document.getElementById(qq).innerText;
            alert(text)
        }else{
            alert("不存在")
        }
    }
    //window.onload=function () {  bo_lang();playPause();};
    window.onloade=console.log('%c加载完成','color:blue');
    window.onloade=console.log('%c欢迎来到ATSW：','color:red');
    window.onloade=console.log('%c     ATSW是一个二次元游戏玩家聚集团体，主要由崩坏三玩家、公主连结玩家、原神玩家、等游戏玩家组成，目前最状大的是崩坏三玩家，而这也是ATSW的最初由来。' +
        '\n    本网站由临冉建设、维护、更新，旨在为ATSW全体成员提供较为详细和真实的ATSW资料数据，如若有做的不到位的地方，还请见谅，也可以向我反映事情，我会做出修改等行为。' +
        '\n    最终解释权归 临冉 所有。','color:red');
    window.onloade=console.log('%cQQ群：725677569','color:green');
</script>
<a name="bottom" style="position:absolute;bottom:0;"></a>
</body>
</html>